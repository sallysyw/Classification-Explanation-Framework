<!DOCTYPE html>
<html lang="en">
<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="">
  <meta name="author" content="">

  <title>Scrolling Nav - Start Bootstrap Template</title>
  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.2/css/all.css">
  
  <!-- Bootstrap core CSS -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet">

  <!-- Material Design Bootstrap -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/mdbootstrap/4.8.2/css/mdb.min.css" rel="stylesheet">

  <!-- Custom styles for this template -->
  <link href="{{ url_for('static', filename='css/scrolling-nav.css') }}" rel="stylesheet">

</head>

<body id="page-top">
    {% with messages = get_flashed_messages() %}
    {% if messages %}
       <ul>
          {% for message in messages %}
          <li<{{ message }}</li>
          {% endfor %}
       </ul>
    {% endif %}
    {% endwith %}

  <!-- Navigation -->
  <nav class="navbar navbar-expand-lg navbar-dark bg-dark fixed-top" id="mainNav">
    <div class="container">
      <a class="navbar-brand js-scroll-trigger" href="#page-top">UC San Diego CSE 256 Final Project</a>
      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarResponsive">
        <ul class="navbar-nav ml-auto">
          <li class="nav-item">
              <a class="nav-link js-scroll-trigger" href="#intro">Intro</a>
          </li>
          <li class="nav-item">
            <a class="nav-link js-scroll-trigger" href="#data">Data</a>
          </li>
          <li class="nav-item">
            <a class="nav-link js-scroll-trigger" href="#model">Model</a>
          </li>
          <li class="nav-item">
            <a class="nav-link js-scroll-trigger" href="#testglobal">Test</a>
          </li>
        </ul>
      </div>
    </div>
  </nav>

  <header class="bg-primary text-white">
    <div class="container text-center">
      <h1>Welcome to text classification demo</h1>
      <p class="lead">More than classification</p>
    </div>
  </header>

  <section id="intro">
      <div class="container">
        <div class="row">
          <div class="col-lg-8 mx-auto">
            <h2>Introduction</h2>
            <p class="lead">This is a great place to talk about your webpage. This template is purposefully unstyled so you can use it as a boilerplate or starting point for you own landing page designs! This template features:</p>
            <ul>
              <li>Clickable nav links that smooth scroll to page sections</li>
              <li>Responsive behavior when clicking nav links perfect for a one page website</li>
              <li>Bootstrap's scrollspy feature which highlights which section of the page you're on in the navbar</li>
              <li>Minimal custom CSS so you are free to explore your own unique design options</li>
            </ul>
          </div>
        </div>
      </div>
  </section>

  
  <section id="data" class="bg-light">
    <div class="container">
      <div class="row">
        <div class="col-lg-8 mx-auto">
          <h2>Upload Training set.</h2>
          <p class="lead">Upload your own training set first. You can also use default training files and <a href="/#model"> Skip</a> file uploding. The requirement of training files are as follows:</p>
          <ul>
            <li>Clickable nav links that smooth scroll to page sections</li>
            <li>Responsive behavior when clicking nav links perfect for a one page website</li>
            <li>Bootstrap's scrollspy feature which highlights which section of the page you're on in the navbar</li>
            <li>Minimal custom CSS so you are free to explore your own unique design options</li>
          </ul>
          <center>
            <form action="{{ url_for('upload_train') }}" method=post enctype=multipart/form-data>
              <input type=file name=file> <input type=submit value=Upload>
            </form>
            <div class="container" style="min-height:100%;width:80%">
                {% with messages = get_flashed_messages(category_filter=["miss_train_file"]) %}
                  {% if messages %}
                    {% for message in messages %}
                    <div class="alert alert-warning alert-dismissible" role="alert">
                    <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">×</span></button>
                    {{message}}
                    </div>
                  {% endfor %}
                  {% endif %}
                {% endwith %}
            </div>
          </center>
        </div>
      </div>
    </div>
  </section>

  <section id="model" >
    <div class="container">
      <div class="row">
        <div class="col-lg-8 mx-auto">
          <h2>Select your model</h2>
          <p class="lead">Select a model here.</p>
          <center>
              <button id = "model/0" type="button" class="btn btn-success btn-rounded">Model1</button>
              <button id = "model/1" type="button" class="btn btn-default btn-rounded">Modle2</button>
              <button id = "model/2" type="button" class="btn btn-secondary btn-rounded">Modle3</button>
              <!-- <button type="button" class="btn btn-success btn-rounded">Model4</button> -->
              <!-- <button type="button" class="btn btn-info btn-rounded">Info</button>
              <button type="button" class="btn btn-warning btn-rounded">Warning</button>
              <button type="button" class="btn btn-danger btn-rounded">Danger</button> -->
              <div id='response_model'></div>
              <button id="train" type="button" class="btn btn-primary btn-rounded">Train!</button>
              <div id = "train_response"></div>
          </center>
        </div>
      </div>
    </div>
  </section>

  <section id="testglobal" class="bg-light">
    <div class="container">
      <div class="row">
        <div class="col-lg-8 mx-auto">
          <h2>Global Explanation</h2>
          <p class="lead">Upload your test file. You can also use default test files and Skip file uploding.</p>
          <div class="container">
              <!--Grid row-->
              <center>
              <form action="{{ url_for('upload_test') }}" method=post enctype=multipart/form-data>
                <input type=file name=file> <input type=submit value=Upload>
              </form>
              <div class="container" style="min-height:100%;width:80%">
                  {% with messages = get_flashed_messages(category_filter=["miss_test_file"]) %}
                    {% if messages %}
                      {% for message in messages %}
                      <div class="alert alert-warning alert-dismissible" role="alert">
                      <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">×</span></button>
                      {{message}}
                      </div>
                    {% endfor %}
                    {% endif %}
                  {% endwith %}
              </div>
              <br>
              <a href = "/predict_global">
              <button type="button" class="btn btn-primary btn-rounded">Run Test!</button>
              </a>
              <div id='response_global'></div>
            </center>
              <!--Grid row-->
              <!-- Grid row-->
              <!-- <div class="row d-flex justify-content-center mt-5">

                  <div class="col-md-10">
          
                    <canvas id="lineChart"></canvas>
          
                  </div>
          
              </div> -->
              <!--Grid row -->
            </div>
        </div>
      </div>
    </div>
  </section>

  <section id="testlocal">
      <div class="container">
        <div class="row">
          <div class="col-lg-8 mx-auto">
            <h2>Local Explanation</h2>
            <p class="lead">In this section, you can either random select a sentence from test set, or try your own sentence!</p>
            <div class="container">
                <center>
                <button id="random_one" type="button" class="btn btn-primary btn-rounded">Random one!</button>
                <!-- Material input -->
                <div class="form-group shadow-textarea">
                  <h4>OR</h4>
                    <textarea class="form-control z-depth-1" id="sentence" rows="3" placeholder="Your sentence here..."></textarea>
                  </div>
                <button id="your_sentence" type="button" class="btn btn-primary btn-rounded">Go!</button>
                <div id='response_local'></div>
                </center>
              </div>
          </div>
        </div>
      </div>
    </section>

  <!-- Footer -->
  <footer class="py-5 bg-dark">
    <div class="container">
      <p class="m-0 text-center text-white">Author: Yiwen Song, Yue Zhao</p>
    </div>
    <!-- /.container -->
  </footer>

  <!-- Bootstrap core JavaScript -->
  <!-- JQuery -->
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
  <!-- Bootstrap tooltips -->
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.4/umd/popper.min.js"></script>
  <!-- Bootstrap core JavaScript -->
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min.js"></script>
  <!-- MDB core JavaScript -->
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mdbootstrap/4.8.2/js/mdb.min.js"></script>
  
  <!-- <script src="{{ url_for('static', filename='vendor/jquery/jquery.min.js') }}"></script> -->
  <script src="{{ url_for('static', filename='vendor/bootstrap/js/bootstrap.bundle.min.js') }}"></script>

  <!-- Plugin JavaScript -->
  <script src= "{{ url_for('static', filename='vendor/jquery-easing/jquery.easing.min.js') }}"></script>

  <!-- Custom JavaScript for this theme -->
  <script src="{{ url_for('static', filename='js/scrolling-nav.js') }}"></script>
  
  
  
  <script type="text/javascript">
    var ctxL = document.getElementById("lineChart").getContext('2d');
    var gradientFill = ctxL.createLinearGradient(0, 0, 0, 290);
    gradientFill.addColorStop(0, "rgba(173, 53, 186, 1)");
    gradientFill.addColorStop(1, "rgba(173, 53, 186, 0.1)");
    var myLineChart = new Chart(ctxL, {
      type: 'line',
      data: {
        labels: ["January", "February", "March", "April", "May", "June", "July"],
        datasets: [{
          label: "My First dataset",
          data: [0, 65, 45, 65, 35, 65, 0],
          backgroundColor: gradientFill,
          borderColor: [
            '#AD35BA',
          ],
          borderWidth: 2,
          pointBorderColor: "#fff",
          pointBackgroundColor: "rgba(173, 53, 186, 0.1)",
        }]
      },
      options: {
        responsive: true
      }
    });
  </script>
</body>


<script>
    var modelid=-1;
    $("button[id^='model']").click(function(event){
      modelid = event.target.id.split('/')[1];
       $.ajax({
          url: '/model/'+modelid,
          type: "get",
         success: function(response) {
         $("#response_model").html(response);
       },
        error: function(xhr__) {
      alert("Please wait a moment!");
      }
     });
   });
</script>


<script>
    $("#train").click(function(event){
       $.ajax({
          url: '/train/'+modelid,
          type: "get",
         success: function(response) {
         $("#train_response").html(response);
       },
        error: function(xhr_) {
         alert("Please wait a moment!");
      }
     });
   });
</script>


<script>
       $("#predict_global").click(function(event){
          $.ajax({
             url: "/predict_global",
             type: "get",
            success: function(response) {
            $("#response_global").html(response);
          },
           error: function(xhr_) {
            alert("Please wait a moment!");
         }
        });
      });
</script>

<script>
    $("#random_one").click(function(event){
       $.ajax({
          url: "/random_one",
          type: "get",
         success: function(response) {
         $("#response_local").html(response);
       },
        error: function(xhr__) {
      alert("Please wait a moment!");
      }
     });
   });
</script>


<script>
    $("#your_sentence").click(function(event){
       var sentence = $('#sentence').val();
       $.ajax({
          url: "/your_sentence"+'/'+sentence,
          type: "get",
         //  data: {button_id: the_id},
         success: function(response) {
         $("#response_local").html(response);
       },
        error: function(xhr__) {
      alert("Please wait a moment!");
      }
     });
   });
</script>

</html>
